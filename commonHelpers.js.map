{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["\nimport flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst refs = {\n  inputDate: document.querySelector('#datetime-picker'),\n  startBtn: document.querySelector('[data-start]'),\n  stopBtn: document.querySelector('[data-stop]'),\n  daysField: document.querySelector('[data-days]'),\n  hoursField: document.querySelector('[data-hours]'),\n  minutesField: document.querySelector('[data-minutes]'),\n  secondsField: document.querySelector('[data-seconds]'),\n};\n\nlet intervalId;\nlet initTime;\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    const userDate = selectedDates[0];\n\n    if (userDate - Date.now() > 0) {\n      refs.startBtn.disabled = false;\n      initTime = userDate;\n    } else {\n      refs.startBtn.disabled = true;\n      iziToast.error({\n        position: 'topRight',\n        theme: 'dark',\n        messageColor: 'white',\n        color: '#ef4040',\n        message: 'Пожалуйста, выберите дату в будущем',\n      });\n    }\n  },\n};\n\nflatpickr(refs.inputDate, options);\n\nrefs.startBtn.addEventListener('click', () => {\n  intervalId = setInterval(() => {\n    const currentTime = Date.now();\n    const diff = initTime - currentTime;\n\n    \n    if (diff <= 0) {\n      clearInterval(intervalId);\n      refs.startBtn.disabled = true;\n      refs.stopBtn.disabled = true;\n      refs.inputDate.disabled = false;\n      return;\n    }\n\n    const time = convertMs(diff);\n    refs.daysField.textContent = `${addZero(time.days)}`;\n    refs.hoursField.textContent = `${addZero(time.hours)}`;\n    refs.minutesField.textContent = `${addZero(time.minutes)}`;\n    refs.secondsField.textContent = `${addZero(time.seconds)}`;\n  }, 1000);\n\n  refs.startBtn.disabled = true;\n  refs.stopBtn.disabled = false;\n  refs.inputDate.disabled = true;\n});\n\nrefs.stopBtn.addEventListener('click', () => {\n  clearInterval(intervalId);\n  refs.daysField.textContent = '00';\n  refs.hoursField.textContent = '00';\n  refs.minutesField.textContent = '00';\n  refs.secondsField.textContent = '00';\n  initTime = null; \n  refs.startBtn.disabled = true;\n  refs.stopBtn.disabled = true;\n  refs.inputDate.disabled = false;\n});\n\nfunction convertMs(ms) {\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  const days = Math.floor(ms / day);\n  const hours = Math.floor((ms % day) / hour);\n  const minutes = Math.floor((ms % hour) / minute);\n  const seconds = Math.floor((ms % minute) / second);\n  return { days, hours, minutes, seconds };\n}\n\nfunction addZero(value) {\n  return value.toString().padStart(2, '0');\n}\n\n\n\n\n\n \n\n"],"names":["refs","intervalId","initTime","options","selectedDates","userDate","iziToast","flatpickr","currentTime","diff","time","convertMs","addZero","ms","days","hours","minutes","seconds","value"],"mappings":"2GAMA,MAAMA,EAAO,CACX,UAAW,SAAS,cAAc,kBAAkB,EACpD,SAAU,SAAS,cAAc,cAAc,EAC/C,QAAS,SAAS,cAAc,aAAa,EAC7C,UAAW,SAAS,cAAc,aAAa,EAC/C,WAAY,SAAS,cAAc,cAAc,EACjD,aAAc,SAAS,cAAc,gBAAgB,EACrD,aAAc,SAAS,cAAc,gBAAgB,CACvD,EAEA,IAAIC,EACAC,EAEJ,MAAMC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrB,MAAMC,EAAWD,EAAc,CAAC,EAE5BC,EAAW,KAAK,IAAG,EAAK,GAC1BL,EAAK,SAAS,SAAW,GACzBE,EAAWG,IAEXL,EAAK,SAAS,SAAW,GACzBM,EAAS,MAAM,CACb,SAAU,WACV,MAAO,OACP,aAAc,QACd,MAAO,UACP,QAAS,qCACjB,CAAO,EAEJ,CACH,EAEAC,EAAUP,EAAK,UAAWG,CAAO,EAEjCH,EAAK,SAAS,iBAAiB,QAAS,IAAM,CAC5CC,EAAa,YAAY,IAAM,CAC7B,MAAMO,EAAc,KAAK,MACnBC,EAAOP,EAAWM,EAGxB,GAAIC,GAAQ,EAAG,CACb,cAAcR,CAAU,EACxBD,EAAK,SAAS,SAAW,GACzBA,EAAK,QAAQ,SAAW,GACxBA,EAAK,UAAU,SAAW,GAC1B,MACD,CAED,MAAMU,EAAOC,EAAUF,CAAI,EAC3BT,EAAK,UAAU,YAAc,GAAGY,EAAQF,EAAK,IAAI,CAAC,GAClDV,EAAK,WAAW,YAAc,GAAGY,EAAQF,EAAK,KAAK,CAAC,GACpDV,EAAK,aAAa,YAAc,GAAGY,EAAQF,EAAK,OAAO,CAAC,GACxDV,EAAK,aAAa,YAAc,GAAGY,EAAQF,EAAK,OAAO,CAAC,EACzD,EAAE,GAAI,EAEPV,EAAK,SAAS,SAAW,GACzBA,EAAK,QAAQ,SAAW,GACxBA,EAAK,UAAU,SAAW,EAC5B,CAAC,EAEDA,EAAK,QAAQ,iBAAiB,QAAS,IAAM,CAC3C,cAAcC,CAAU,EACxBD,EAAK,UAAU,YAAc,KAC7BA,EAAK,WAAW,YAAc,KAC9BA,EAAK,aAAa,YAAc,KAChCA,EAAK,aAAa,YAAc,KAChCE,EAAW,KACXF,EAAK,SAAS,SAAW,GACzBA,EAAK,QAAQ,SAAW,GACxBA,EAAK,UAAU,SAAW,EAC5B,CAAC,EAED,SAASW,EAAUE,EAAI,CAMrB,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAC1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EACpCG,EAAU,KAAK,MAAOH,EAAK,KAAQ,GAAM,EACzCI,EAAU,KAAK,MAAOJ,EAAK,IAAU,GAAM,EACjD,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAEA,SAASL,EAAQM,EAAO,CACtB,OAAOA,EAAM,SAAU,EAAC,SAAS,EAAG,GAAG,CACzC"}